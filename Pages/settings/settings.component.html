
<div class="settings-container">
     <!-- Saved Indicator -->
    <div class="settings-actions">
    <span class="saved-indicator" [class.visible]="showSaved">
        ‚úì Settings saved
    </span>
    </div>

    <!-- Display Settings Section -->
    <app-settings-section
    title="Display Settings"
    description="Configure what is displayed on the play page."
    >
    <app-setting-item
        title="Show Prizes List"
        description="Display the list of available prizes on the right side of the play page."
    >
        <app-toggle-switch
        [checked]="settings.showPrizesList"
        (checkedChange)="onShowPrizesListChange($event)"
        ></app-toggle-switch>
    </app-setting-item>

    <app-setting-item
        title="Show Win Chances"
        description="Display the probability of winning each prize in the prizes list."
        [disabled]="isOddsDisabled"
    >
        <app-toggle-switch
        [checked]="settings.showOdds"
        [disabled]="isOddsDisabled"
        (checkedChange)="onShowOddsChange($event)"
        ></app-toggle-switch>
    </app-setting-item>
    </app-settings-section>

    <!-- Pity System Section -->
    <app-settings-section
    title="Pity System"
    description="Guarantee a win after a certain number of spins without winning."
    >
    <app-setting-item
        title="Enable Pity System"
        description="Automatically grant a win after reaching the pity threshold set in Edit Odds."
    >
        <app-toggle-switch
        [checked]="settings.enablePitySystem"
        (checkedChange)="onEnablePitySystemChange($event)"
        ></app-toggle-switch>
    </app-setting-item>

    <app-setting-item
        title="Show Pity Warning"
        description="Display a warning message when the next roll is guaranteed to be a win."
        [disabled]="!settings.enablePitySystem"
    >
        <app-toggle-switch
        [checked]="settings.showPityWarning"
        [disabled]="!settings.enablePitySystem"
        (checkedChange)="onShowPityWarningChange($event)"
        ></app-toggle-switch>
    </app-setting-item>
    </app-settings-section>

    <!-- Arduino Control Section -->
    <app-settings-section
    title="Arduino Control"
    description="Enable external Arduino control for the slot machine."
    >
    <app-setting-item
        title="Enable Arduino Control"
        description="Allow triggering rolls via Arduino board connected through USB. Requires a supported browser (Chrome, Edge, Opera)."
        [class.disabled]="isMobile"
    >
        <app-toggle-switch
        [checked]="settings.enableArduinoControl"
        [disabled]="isMobile"
        (checkedChange)="onEnableArduinoControlChange($event)"
        ></app-toggle-switch>
    </app-setting-item>
    <div *ngIf="isMobile" class="arduino-disabled-note">
        ‚ö† Arduino control is not available on mobile devices
    </div>
    </app-settings-section>

    <!-- Color Theme Section -->
    <app-settings-section
    title="Color Theme"
    description="Choose the color theme for the application."
    >
    <div class="theme-settings">
        <p class="helper-text">Select a color theme to change the appearance of the application.</p>
        
        <!-- Theme Options Grid -->
        <div class="theme-grid">
        <div 
            *ngFor="let theme of availableThemes"
            class="theme-option"
            [class.selected]="isThemeSelected(theme.name)"
            (click)="selectTheme(theme.name)"
        >
            <div class="theme-preview" [style.background]="theme.colors.previewGradient"></div>
            <div class="theme-name">{{ theme.displayName }}</div>
            <div class="selected-indicator">‚úì</div>
        </div>
        </div>
    </div>
    </app-settings-section>

    <!-- Text Customization Section -->
    <app-settings-section
    title="Text Customization"
    description="Customize what text and notifications appear during each game state. Toggle to show/hide text for each state."
    >
    <!-- Ready State Text -->
    <app-setting-item
        title="Ready to Roll State"
        description="Show text when the game is ready and waiting for you to click roll."
    >
        <app-toggle-switch
        [checked]="settings.showButtonTextRoll"
        (checkedChange)="onShowButtonTextRollChange($event)"
        ></app-toggle-switch>
    </app-setting-item>

    <div class="button-text-settings" *ngIf="settings.showButtonTextRoll">
        <div class="text-input-group">
        <label for="buttonTextRoll">Text to Display</label>
        <input 
            type="text" 
            id="buttonTextRoll"
            class="text-input"
            [value]="settings.buttonTextRoll"
            (blur)="onButtonTextRollChange($any($event.target).value)"
            placeholder="ROLL"
        />
        <p class="input-hint">üí° Appears on the button when you can click to start rolling</p>
        </div>
    </div>

    <hr class="button-text-divider" *ngIf="settings.showButtonTextRoll" />

    <!-- Rolling State Text -->
    <app-setting-item
        title="Currently Rolling State"
        description="Show text while the slot machine reels are actively spinning."
    >
        <app-toggle-switch
        [checked]="settings.showNotificationRolling"
        (checkedChange)="onShowNotificationRollingChange($event)"
        ></app-toggle-switch>
    </app-setting-item>

    <div class="button-text-settings" *ngIf="settings.showNotificationRolling">
        <div class="text-input-group">
        <label for="notificationRolling">Text to Display</label>
        <input 
            type="text" 
            id="notificationRolling"
            class="text-input"
            [value]="settings.notificationRolling"
            (blur)="onNotificationRollingChange($any($event.target).value)"
            placeholder="ROLLING..."
        />
        <p class="input-hint">üí° Appears while the reels are in motion (button is disabled)</p>
        </div>
    </div>

    <hr class="button-text-divider" *ngIf="settings.showNotificationRolling" />

    <!-- Win Notification -->
    <app-setting-item
        title="Win Result State"
        description="Show a notification when a winning combination is hit and a prize is won."
    >
        <app-toggle-switch
        [checked]="settings.showNotificationWin"
        (checkedChange)="onShowNotificationWinChange($event)"
        ></app-toggle-switch>
    </app-setting-item>

    <div class="button-text-settings" *ngIf="settings.showNotificationWin">
        <div class="text-input-group">
        <label for="notificationWin">Text to Display</label>
        <input 
            type="text" 
            id="notificationWin"
            class="text-input"
            [value]="settings.notificationWin"
            (blur)="onNotificationWinChange($any($event.target).value)"
            placeholder="YOU WON: {reward}"
        />
        <p class="input-hint">üí° Appears as a notification when you win. Use "{{ '{reward}' }}" to dynamically show the prize name.</p>
        </div>
    </div>

    <hr class="button-text-divider" *ngIf="settings.showNotificationWin" />

    <!-- After Roll Notification -->
    <app-setting-item
        title="After Roll Notification"
        description="Show a notification message after every roll is complete (win or loss)."
    >
        <app-toggle-switch
        [checked]="settings.showNotificationAfterRoll"
        (checkedChange)="onShowNotificationAfterRollChange($event)"
        ></app-toggle-switch>
    </app-setting-item>

    <div class="button-text-settings" *ngIf="settings.showNotificationAfterRoll">
        <div class="text-input-group">
        <label for="notificationAfterRoll">Notification Text</label>
        <input 
            type="text" 
            id="notificationAfterRoll"
            class="text-input"
            [value]="settings.notificationAfterRoll"
            (blur)="onNotificationAfterRollChange($any($event.target).value)"
            placeholder="Thanks for playing!"
        />
        <p class="input-hint">üí° Appears as a notification after every roll completes, regardless of the outcome</p>
        </div>
    </div>

    <hr class="button-text-divider" *ngIf="settings.showNotificationAfterRoll" />

    <!-- Arduino Instruction Text -->
    <app-setting-item
        title="Arduino Control State"
        description="Show instruction text when external Arduino hardware control is active."
        [disabled]="!settings.enableArduinoControl"
    >
        <app-toggle-switch
        [checked]="settings.showButtonTextArduino"
        [disabled]="!settings.enableArduinoControl"
        (checkedChange)="onShowButtonTextArduinoChange($event)"
        ></app-toggle-switch>
    </app-setting-item>

    <div class="button-text-settings" *ngIf="settings.showButtonTextArduino" [class.disabled]="!settings.enableArduinoControl">
        <div class="text-input-group">
        <label for="buttonTextArduino">Text to Display</label>
        <input 
            type="text" 
            id="buttonTextArduino"
            class="text-input"
            [value]="settings.buttonTextArduino"
            [disabled]="!settings.enableArduinoControl"
            (blur)="onButtonTextArduinoChange($any($event.target).value)"
            placeholder="Press the button to roll!"
        />
        <p class="input-hint">üí° Appears when waiting for Arduino physical button press</p>
        </div>
    </div>

    <div *ngIf="!settings.enableArduinoControl" class="arduino-disabled-note">
        ‚ö† Enable Arduino Control in settings above to customize this text
    </div>
    </app-settings-section>

    <!-- Company Branding Section -->
    <app-settings-section
    title="Company Branding"
    description="Customize the company logo displayed throughout the application."
    >
    <div class="logo-settings">
        <!-- Logo Type Toggle -->
        <div class="logo-type-toggle">
        <button 
            class="toggle-btn"
            [class.active]="selectedLogoType === 'regular'"
            (click)="switchLogoType('regular')"
        >
            üìÑ Regular Logo
        </button>
        <button 
            class="toggle-btn"
            [class.active]="selectedLogoType === 'small'"
            (click)="switchLogoType('small')"
        >
            üîò Small Logo
        </button>
        </div>

        <!-- Regular Logo Section -->
        <div *ngIf="selectedLogoType === 'regular'" class="logo-content">
        <p class="logo-usage-hint">This logo is displayed in the sidebar header (inside the expanded sidebar)</p>
        <!-- Current Logo Preview -->
        <div class="logo-preview-section">
        <h4>Current Logo</h4>
        <div class="logo-preview">
            <img [src]="settings.companyLogo" alt="Company Logo" />
        </div>
        </div>

        <!-- Logo Path Input -->
        <div class="logo-input-section">
        <h4>Logo Path</h4>
        <input 
            type="text" 
            class="logo-path-input"
            [value]="settings.companyLogo"
            (change)="onLogoPathChange($any($event.target).value)"
            placeholder="assets/images/your-logo.png"
        />
        <p class="helper-text">Enter the path to your logo file, or upload/select one below.</p>
        </div>

        <!-- File Upload -->
        <div class="logo-upload-section">
        <h4>Upload Custom Logo</h4>
        <label class="upload-button">
            <input 
            type="file" 
            accept="image/*"
            (change)="onLogoFileUpload($event)"
            hidden
            />
            <span>üìÅ Choose File</span>
        </label>
        <p class="helper-text">Upload a custom logo image (PNG, JPG, SVG, etc.)</p>
        </div>

        <!-- Preset Logos -->
        <div class="logo-presets-section">
        <h4>Or Select a Preset</h4>
        <div class="logo-grid">
            <div 
            *ngFor="let logo of presetLogos"
            class="logo-option"
            [class.selected]="isLogoSelected(logo)"
            (click)="selectPresetLogo(logo)"
            >
            <img [src]="logo" [alt]="logo" />
            <div class="selected-indicator">‚úì</div>
            </div>
        </div>
        </div>
        </div>

        <!-- Small Logo Section -->
        <div *ngIf="selectedLogoType === 'small'" class="logo-content">
        <p class="logo-usage-hint">This logo is displayed in the collapse/expand toggle button (top-left corner)</p>
        <!-- Current Small Logo Preview -->
        <div class="logo-preview-section">
        <h4>Current Small Logo</h4>
        <div class="logo-preview logo-preview-small">
            <img [src]="settings.companyLogoSmall" alt="Company Small Logo" />
        </div>
        </div>

        <!-- Small Logo Path Input -->
        <div class="logo-input-section">
        <h4>Small Logo Path</h4>
        <input 
            type="text" 
            class="logo-path-input"
            [value]="settings.companyLogoSmall"
            (change)="onLogoSmallPathChange($any($event.target).value)"
            placeholder="assets/images/your-small-logo.png"
        />
        <p class="helper-text">Enter the path to your small logo file, or upload/select one below.</p>
        </div>

        <!-- Small Logo File Upload -->
        <div class="logo-upload-section">
        <h4>Upload Custom Small Logo</h4>
        <label class="upload-button">
            <input 
            type="file" 
            accept="image/*"
            (change)="onLogoSmallFileUpload($event)"
            hidden
            />
            <span>üìÅ Choose File</span>
        </label>
        <p class="helper-text">Upload a custom small logo image (PNG, JPG, SVG, etc.)</p>
        </div>

        <!-- Preset Small Logos -->
        <div class="logo-presets-section">
        <h4>Or Select a Preset</h4>
        <div class="logo-grid">
            <div 
            *ngFor="let logo of presetLogosSmall"
            class="logo-option"
            [class.selected]="isLogoSmallSelected(logo)"
            (click)="selectPresetLogoSmall(logo)"
            >
            <img [src]="logo" [alt]="logo" />
            <div class="selected-indicator">‚úì</div>
            </div>
        </div>
        </div>
        </div>
    </div>
    </app-settings-section>

    <!-- Tutorial Section -->
    <!--<app-settings-section
    title="Help & Tutorial"
    description="Access the interactive tutorial to learn how to use the application."
    >
    <app-setting-item
        title="Show Tutorial"
        description="Reopen the getting started tutorial that guides you through adding items and prizes."
    >
        <button class="tutorial-button" (click)="showTutorial()">
        üìö Start Tutorial
        </button>
    </app-setting-item>
    </app-settings-section>
</div>-->

<!-- Tutorial Modal -->
<!--<tutorial-modal *ngIf="showTutorialModal" (close)="closeTutorial()"></tutorial-modal>-->
