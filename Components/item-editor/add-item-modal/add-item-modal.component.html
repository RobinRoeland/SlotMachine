<div 
  *ngIf="show"
  class="modal-overlay" 
  (click)="onClose()">
  <div class="modal-content" (click)="$event.stopPropagation()">
    <button class="modal-close" (click)="onClose()">×</button>
    <h2>Add New Item</h2>
    
    <div class="form-group">
      <label for="newItemName">Item Name</label>
      <input 
        type="text" 
        id="newItemName" 
        [(ngModel)]="newItemName"
        placeholder="Enter item name"
        required />
    </div>
    
    <div class="form-group">
      <label>Item Image</label>
      <div 
        class="drop-zone"
        [class.dragging]="isDragging"
        [class.has-image]="imagePreview"
        [class.mobile-only]="isMobileDevice()"
        (dragover)="onDragOver($event)"
        (dragleave)="onDragLeave($event)"
        (drop)="onDrop($event)">
        
        <div *ngIf="!imagePreview" class="drop-zone-content">
          <svg *ngIf="!isMobileDevice()" class="upload-icon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12" />
          </svg>
          <p *ngIf="!isMobileDevice()" class="drop-zone-text">Drag & drop an image here</p>
          <p *ngIf="!isMobileDevice()" class="drop-zone-subtext">or</p>
          <label for="newItemImage" class="file-input-label">
            {{ isMobileDevice() ? 'Select Image' : 'Choose File' }}
          </label>
          <input 
            type="file" 
            id="newItemImage" 
            (change)="onImageSelected($event)"
            accept="image/*"
            hidden />
        </div>

        <div *ngIf="imagePreview" class="image-preview-container">
          <img [src]="imagePreview" alt="Preview" class="image-preview" />
          <button type="button" class="clear-image" (click)="clearImage()">×</button>
        </div>
      </div>
    </div>
    
    <div class="modal-actions">
      <button class="btn-cancel" (click)="onClose()">Cancel</button>
      <button 
        class="btn-add" 
        (click)="onConfirm()"
        [disabled]="!newItemName.trim() || !newItemImage">
        Add item
      </button>
    </div>
    
    <div class="error-message" *ngIf="errorMessage">
      {{ errorMessage }}
    </div>
  </div>
</div>
